#!/usr/bin/env ruby


require 'logger'
require 'hotspots'

LOG_LEVELS = {
  :debug => ::Logger::DEBUG,
  :info  => ::Logger::INFO,
  :warn  => ::Logger::WARN,
  :error => ::Logger::ERROR,
  :fatal => ::Logger::FATAL,
}
LOG_LEVELS.default = ::Logger::ERROR

logger = ::Logger.new(STDOUT)
logger.formatter = proc do |severity, datetime, progname, msg|
  "#{datetime}: #{msg}\n"
end

configuration = Hotspots::Configuration.new(:log_levels => LOG_LEVELS)
options = Hotspots::OptionsParser.new(:configuration => configuration, :log_levels => LOG_LEVELS)

configuration.logger = logger
overridden_configuration = options.parse(*ARGV)

Hotspots.new(:configuration => configuration).output
